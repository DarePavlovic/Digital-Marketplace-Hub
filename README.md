# Online Sales Simulation System

## Overview

This project involves the development of a system to simulate online sales of items. The system acts as an intermediary between customers and stores, handling the advertisement of items, order creation, delivery, and payments. The system ensures the integrity of transactions and manages the logistics of delivering items from stores to customers.

## Features

- **Store Management**: Stores can advertise items with defined prices and quantities. Stores can also set discounts for a specific period.
- **Customer Orders**: Customers create orders by selecting items from multiple stores and specifying quantities. The system verifies the order, processes payments, and manages the delivery.
- **Order States**: Orders can be in one of three states: `created`, `sent`, or `arrived`.
- **Delivery Logistics**: The system calculates the shortest delivery paths between cities and manages the two-step delivery process.
- **Financial Transactions**: The system handles payments, retains a commission, and transfers the remaining amount to the stores involved in the order.
- **Discounts**: Additional discounts are applied for customers who have spent over a certain amount in the past 30 days.

## Database Requirements

- **Tables**: The database includes tables for stores, items, customers, orders, transactions, and cities.
- **Triggers and Procedures**:
  - `TR_TRANSFER_MONEY_TO_SHOPS`: Trigger for transferring money to stores when an order arrives.
  - `SP_FINAL_PRICE`: Procedure for calculating the final price of an order, including discounts.
- **Constraints**: Use `ON UPDATE CASCADE` and `ON DELETE NO ACTION` for referential integrity where applicable.
- **Data Types**: Use `DECIMAL(10,3)` for decimal numbers and a maximum length of 100 characters for text columns unless specified otherwise.

## Implementation Details

- **Classes**: Implement classes with the prefix `piggbbbb_` that implement all interfaces and methods as specified.
- **Database Interaction**: Use JPA or JDBC for database communication.
- **SQL Scripts**: Include SQL scripts for creating tables, triggers, procedures, and functions.

## Requirements

1. **Java Classes**: Classes with the prefix `piggbbbb_` implementing the required interfaces, located in the package `rs.etf.sab.student`.
2. **Main Class**: Modified `studentMain.java`.
3. **Additional Classes**: Any other Java classes and packages in `rs.etf.sab.student`.
4. **ERwin Model**: `piggbbbb.erwin` and `piggbbbb.png` - ERwin Data Modeler files.
5. **SQL Scripts**: 
   - `piggbbbb.sql`: SQL script generated by ERwin Data Modeler.
   - `piggbbbb-tsql.sql`: SQL script containing triggers, stored procedures, and functions.
6. **Database Backup**: `piggbbbb.bak` - Backup of the database.
